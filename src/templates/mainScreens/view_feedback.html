<!DOCTYPE html>
<html>
<head>
    <title>View Feedback</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</head>
<body data-role="{{ session.get('role') }}"> 
    <header>
        <span class="icon" onclick="toggleMenu()"><i class="fas fa-bars"></i></span>
        <span class="header-title">Publication Feedback</span>
        <a href="javascript:history.back()" class="icon"><i class="fas fa-arrow-left"></i></a>
    </header>

    <div class="dashboard-grid">
        
        <div class="chart-box" style="text-align: center; display: flex; flex-direction: column; align-items: center;">
            {% if paper.CoverImage %}
                <img src="{{ url_for('static', filename='uploads/covers/' + paper.CoverImage) }}" 
                     style="max-width: 100%; height: 350px; object-fit: contain; border-radius: 8px; margin-bottom: 20px;">
            {% else %}
                <div class="front-page-placeholder" style="width: 200px; height: 300px; margin-bottom: 20px;">
                    <i class="fas fa-file-image fa-3x"></i><br>NO COVER
                </div>
            {% endif %}
            
            <a href="{{ paper.LinkToPaper }}" target="_blank" class="btn btn-blue" style="width: 100%;">
                <i class="fas fa-external-link-alt"></i> View Publication
            </a>
        </div>

        <div class="chart-box">
            <div style="display: flex; justify-content: space-between; margin-bottom: 20px; align-items: flex-start;">
                <div>
                    <h2 style="color: var(--primary); margin-bottom: 10px;">{{ paper.PaperTitle }}</h2>
                    <p style="color: var(--text-muted);"><i class="fas fa-user-edit"></i> {{ paper.Authors }}</p>
                    <p style="color: var(--text-muted);"><i class="far fa-calendar-alt"></i> {{ paper.DatePublished }}</p>
                </div>
                <div>
                    {% if paper.Status == 'Approved' %}
                        <div class="status-arrow st-approved">
                            <i class="fas fa-check-circle"></i> Approved
                        </div>
                    {% elif paper.Status == 'Rejected' %}
                        <div class="status-arrow st-rejected">
                            <i class="fas fa-times-circle"></i> Rejected
                        </div>
                    {% endif %}
                </div>
            </div>
            
            <hr style="border: 0; border-top: 1px solid var(--border); margin: 20px 0;">

            <h3 style="color: var(--text-white); margin-bottom: 10px;">Reviewer Feedback:</h3>
            <div class="review-box" style="height: auto; min-height: 150px; color: var(--text-muted);">
                {% if paper.Feedback %}
                    {{ paper.Feedback }}
                {% else %}
                    <em>No feedback provided.</em>
                {% endif %}
            </div>
        </div>
    </div>
</body>
</html>