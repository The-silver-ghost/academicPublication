<!DOCTYPE html>
<html>
<head>
    <title>Bookmarks</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <style>
        .btn-bookmark { background: none; border: none; cursor: pointer; padding: 0; }
    </style>
</head>
<body>
    <header>
        <span class="icon" onclick="toggleMenu()"><i class="fas fa-bars"></i></span>
        <span class="header-title">Bookmarks</span>

        <form action="{{ url_for('coordinator_bookmarks') }}" method="GET" style="display:flex; align-items:center;">
            <div class="search-container" style="width: 300px;">
                <input type="text" name="query" placeholder="Search saved..." value="{{ request.args.get('query', '') }}">
                <button type="submit"><i class="fas fa-search"></i></button>
            </div>
        </form>
        <span class="icon"><i class="fas fa-user-circle"></i></span>
    </header>

    <div class="toolbar" style="justify-content: flex-end;">
        <div class="pagenumber-container">
            <span>{{ total }} Saved</span>
            <span style="margin: 0 10px; color: var(--border);">|</span>
            {% if current_page > 1 %}
                <a href="{{ url_for('coordinator_bookmarks', page=current_page-1, query=request.args.get('query')) }}" class="page-link"><i class="fas fa-chevron-left"></i></a>
            {% endif %}
            {% for p in range(1, pages + 1) %}
                <a href="{{ url_for('coordinator_bookmarks', page=p, query=request.args.get('query')) }}" class="page-link {% if p == current_page %}active{% endif %}">{{ p }}</a>
            {% endfor %}
            {% if current_page < pages %}
                <a href="{{ url_for('coordinator_bookmarks', page=current_page+1, query=request.args.get('query')) }}" class="page-link"><i class="fas fa-chevron-right"></i></a>
            {% endif %}
        </div>
    </div>

    <div class="list-container">
        {% for paper in papers %}
        <div class="list-item">
            <div class="index">{{ (current_page - 1) * 10 + loop.index }}</div>
            
            {% if paper.CoverImage %}
                <img src="{{ url_for('static', filename='uploads/covers/' + paper.CoverImage) }}" style="width: 80px; height: 110px; object-fit: cover; border-radius: 6px;">
            {% else %}
                <div class="front-page-placeholder" style="width: 80px; height: 110px;">
                    <i class="fas fa-file-alt fa-2x"></i>
                </div>
            {% endif %}

            <div class="item-details" style="flex: 1;">
                <h3><a href="{{ paper.LinkToPaper }}" target="_blank">{{ paper.PaperTitle }}</a></h3>
                <p><i class="fas fa-user-edit"></i> {{ paper.Authors }}</p>
                <p><i class="far fa-calendar-alt"></i> {{ paper.DatePublished }} &bull; <span style="color: var(--primary);">{{ paper.PaperType }}</span></p>
            </div>

            <form action="{{ url_for('toggle_bookmark') }}" method="POST">
                <input type="hidden" name="paper_id" value="{{ paper.PaperID }}">
                <button type="submit" class="btn-bookmark" title="Remove Bookmark">
                    <i class="fas fa-bookmark icon-bookmark filled"></i>
                </button>
            </form>
        </div>
        {% else %}
            <div style="text-align: center; padding: 4rem; color: var(--text-muted);">
                <i class="far fa-bookmark fa-3x" style="margin-bottom: 1rem; opacity: 0.5;"></i>
                <p>No bookmarks found.</p>
            </div>
        {% endfor %}
    </div>
</body>
</html>